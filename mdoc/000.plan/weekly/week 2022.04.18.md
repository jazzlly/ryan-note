存在问题
存在问题

- [ ] 服务器团队制度建设
    - [ ] 沟通机制

[[go.plan | go计划]]

- gin jenkins范例
- 过gorm文档
- [ ] bug fix

- [ ] 配置saml继承
- [ ] 
下周计划

https://pkg.go.dev/bytes#example-Compare
https://medium.com/capital-one-tech/learning-to-use-go-reflection-part-2-c91657395066

https://github.com/ryan-holcombe/testable-golang

https://studygolang.com/articles/19223
https://blog.learngoprogramming.com/code-organization-tips-with-packages-d30de0d11f46

[[one access]]

## 周任务
- [ ] go lang的反射机制
	- [ ] https://medium.com/capital-one-tech/learning-to-use-go-reflection-822a0aed74b7
- [ ] go validate源代码学习, 翻译机制
- [ ] go validate翻译机制
- [ ] 调研一下golang和gin的validate机制

其他服务添加git commit查询机制

- [ ] 集中管控flume相关调研
- [ ] 通用消息传递机制: 消息跨区机制，目前是广播，后续是否能够支持定向消息
- [ ] cb 的日志的rotate

### 4.28
- [x] vmware oneaccess第三方idp对接
- [x] 联通生产环境bug fix


### 4.27
- [x] snmp网络拓扑发现调研


### 4.26
- [ ] 网络设备同步调研 lldp协议， snmp协议
- [ ] 标准版bug fix

### 4.25
- [ ] 总结一下saml idp 的登录流程
- [ ] vmware saml idp流程对接支持
- [ ] 标准版bug fix

### 4.24
- [ ] 联通生产环境bug fix
- [ ] pxc故障问题
- [ ] 联通生产环境升级流程问题
- [ ] 统一认证，导入用户时，出错，导出文件是存在在nginx中的
- [ ] 

### 4.23
- [ ] vmware third party idp

### 4.22
- [ ] 姜睿，有空的时候查一下服务端在pom文件中加了增加git信息的编译配置？
- [ ] 看完graceful shutdown
- [ ] 测试一下kafkahandler逻辑

### 4.21

- [ ] 联通CB加密机制联调，测试
	- [ ] 汇总一下加密机制的文档，文件
	- [ ] 证书验证机制
		- [ ] 对照文档编写测试用例
		- [ ] java client 和go client
	- [ ] HMAC验证机制
		- [ ] 对照文档编写测试用例
		- [ ] java client 和go client
	- [ ] 对照文档编写代码编写代码

### 4.20
- [ ] 联通CB bug fix


### 4.19
- [ ] 甘肃redis挂掉问题
- [ ] pxc每天重启问题
- [ ] 
- [ ] 阅读bytes.Buffer的文档
- [ ] 通过中间件解密apikey, apitoken
- [ ] go lang的反射机制
- [ ] bug fix


### 4.18
- [ ] 25887 [MARS平台]【V8.1升级】【联通云平台】【生产环境】【设备管理平台】【尽快解决】微信聊天内容导出失败
- [ ] 
- [ ] 通过中间件解密apikey, apitoken
- [ ] go lang的反射机制
- [ ] bug fix

### 4.11
- [x] 添加用户日志单元测试
- [x] 为用户接口添加新的日志机制
- [ ] 
- [x] 添加错误日志
- [ ] 添加日志中变更部分
- [ ] 
- [ ] 注册设备bug

- [ ] golang validation


- [ ] 看一下git plug in

- [ ] 添加加密接口
	- [ ] 
- [ ] go kafka消费者无法消费问题。换了消费组名称就好了
- [ ] nginx 证书目录: /apps/web/cert
- [ ] 设置一个上报黑名单，对于各类桌面的使用忽略上报
- [ ] 删除服务的时候，需要将对应的uas授权关系删除
	- [ ] 有一个bug
- [ ] 需要同步一下op和uas的service code map表

- [ ] 崔总提了意见， 修改cb对接接口文档，提供
```
崔振对接口提出如下意见，1、接口应增加账号、密码认证机制，密码应有随机因子。2、对访问接口的IP应增加IP白名单机制。另外对于数据的加密存储，建议全量数据加密，这样可以一劳永逸，避免联通数据管理要求中数据分级发生变化后，还要做调整。
```

- [ ] 看看rmc数据库中opTenantId为0的用户，不应该有太多!

```
google: golang package organization
https://github.com/golang-standards/project-layout/blob/master/README_zh.md
```


# 搭建cb api服务重构的测试环境
- [x] 使用op.kafka.pekall.com作为测试kafka
- [x] 编写测试命令行工具

- [x] 看看uas日志问题
- [x] 请销假导出的文件放到下载目录/apps/pekall/upload/data目录 : 已经上传到seaweed服务
- [ ] 应用市场下载服务清理
- [x] rmc, unilog服务并发大导致es宕机问题
   短期：备份，重命名半年前index；暂停应用使用，应用审计，设备位置等高并发数据上报
   中期：使用es bulk方式批量插入数据，提高es并发写入量。

### 4.3
- [ ] 添加加密接口
	- [ ] 调研一下golang和gin的validate机制

### 4.1
- [ ] 为cb 相关表添加索引, 特别是同步任务
	- [x] 需要为用户表的stop time 和 open_stat添加索引
	- [x] 为cb用户表添加tenantAccount, 用于租户隔离。
	- [x] uas同步用户时，需要添加租户的账号
	- [x] unisync entity也要修改

- [x] 考虑cb用户的租户隔离
	- [x] 需要考虑多个cb租户里面有相同的手机号, 同时有普通用户有同样的手机号

### 3.29
- [x] 测试一下kafka消息的状态!

### 3.30
- [ ]  go flag
- [ ] https://jordanorelli.com/post/32665860244/how-to-use-interfaces-in-go
- [ ] https://research.swtch.com/interfaces
- [ ] 
- [ ] https://stackoverflow.com/questions/63421976/panic-reflect-call-of-reflect-value-fieldbyname-on-interface-value
- [ ] 
- [ ] 删除一下华为桌面的使用记录
	- [x] delete by query
	- [ ] 备份一下2021年的数据
	- [ ] 
- [ ] 设置一个上报黑名单，对于各类桌面的使用忽略上报

- [ ] nginx 证书目录: /apps/web/cert

- [ ] 重构一下go服务

- [ ] 泛读一下gorm的指南
	- [x] 记录和加解密相关的知识点
	- [ ] go context的使用
		- [ ] https://draveness.me/golang/docs/part3-runtime/ch06-concurrency/golang-context/
	- [ ] 错误处理方式
	- [ ] 事务处理方式
	- [ ] 是否需要使用session

### 3.17
- [ ] 删除服务的时候，需要将对应的uas授权关系删除
	- [ ] 有一个bug
- [ ] 需要同步一下op和uas的service code map表

- [ ] 崔总提了意见， 修改cb对接接口文档，提供
```
崔振对接口提出如下意见，1、接口应增加账号、密码认证机制，密码应有随机因子。2、对访问接口的IP应增加IP白名单机制。另外对于数据的加密存储，建议全量数据加密，这样可以一劳永逸，避免联通数据管理要求中数据分级发生变化后，还要做调整。
```

- [ ] 联通升级
	- [ ] mdm扩展服务需要升级一下

- [ ] 看看rmc数据库中opTenantId为0的用户，不应该有太多!

### 3.22
部署一下cb api 服务
铁路公安同步问题

